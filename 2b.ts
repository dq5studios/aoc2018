/**
 * Advent of code, day two, second puzzle
 * @see https://adventofcode.com/2018/day/2#part2
 */

let aoc2b = () => {

    let input: string = `qwubbihrkplymcraxefntvdzns
qwugbihrkplyzcjahefttvdzns
qwugbihrkplymcjoxrsotvdzns
qwugbphrkplympjaxmfotvdzns
qwugbghrkpltbcjaxefotvdzns
qwubbihrwpuymcjaxefotvdzns
qiugpihrkplymcwaxefotvdzns
qwugbihrkplymcjavefotvotns
qwugbihrkpvymcjaxefotvnzes
qwvgbihrkpltmcnaxefotvdzns
qwugvihrkplymvjaxefotvczns
qwugbihrkplymwjazefotvyzns
qwugbihrkplbmcjbxefttvdzns
qhugbihrkplymcjaxefotnazns
qwugbihrkpyyacjacefotvdzns
qwugsihrkpsymcjaxafotvdzns
qwugbihriplymcjixefosvdzns
qwuibihrkjlvmcjaxefotvdzns
qwugbjhrgplymcjaxefotvdzys
qwugnimrkplymcjayefotvdzns
qwumjihrkplymcjexefotvdzns
qwugbihukptymcjaxefotvvzns
qwughthrgplymcjaxefotvdzns
qlugbihrkplymcjbxhfotvdzns
qhugbiyrkplymcjaxefotvdzes
qwugbihrkvlymcjaxecotvtzns
qwugbihrkphymcjaxefitvizns
qwugbbhdtplymcjaxefotvdzns
qwugbihrkplymceaxefotvltns
mwugbihrkptymcpaxefotvdzns
qwugbihrdplymcvaxefotvdwns
qwugbihrkplymcjaxekhtvhzns
qjugbihrkplyjcjaxefonvdzns
qwugbihrjplymcjaxefgtudzns
qlugbihrkplymcjaxefztvdpns
qwugbihrkclyvpjaxefotvdzns
qwugbihrsplymnjhxefotvdzns
qwudbihrbxlymcjaxefotvdzns
qwugbihrkplymcjxxefatvdzng
qwujbihrkplyqdjaxefotvdzns
qwugnihrkplamcjaxefotvmzns
qwugnihrkplymcjajekotvdzns
qwugbihrkslymcjamsfotvdzns
fwugbihrkplymcjaxetotvdzne
qwughihrkplyucfaxefotvdzns
qwuebihrkplymcraxefotvdzgs
qwugbinrkplymcjaxefodvdznh
qwudbihrkplymcjsxefotvjzns
qwlgbihrkzlymcjixefotvdzns
qwugbihckpoymcpaxefotvdzns
qwfgbibskplymcjaxefotvdzns
qwugbihrkplymczaxdfotvuzns
qwugbihwkplymcjaxepxtvdzns
qwubbihrkplymcjaxefntfdzns
qwunbihrkpaymcjaxefotvdzni
qwugfihrkplymujaxefotvdzni
qwugrihrkplymkjaxxfotvdzns
ztugbihrkplymcjaxefotvdznt
qwugbihrkplvmcjaxefotvdzph
qwugtinrfplymcjaxefotvdzns
qwugbihrkplamcjkmefotvdzns
qwtgbihryplymcjaxeeotvdzns
qwugbiazkplymhjaxefotvdzns
pwugbihrkplymklaxefotvdzns
wwugbihkxplymcjaxefotvdzns
dwugbihrgpdymcjaxefotvdzns
qwulbihrkplymcjaxefoqvqzns
qvugbihrkplyhcjtxefotvdzns
qwugbihrkplymcjaxcfotvfzjs
qwugbihrkpkymyjaxdfotvdzns
qwugbinrkplymcjswefotvdzns
qcuguiqrkplymcjaxefotvdzns
qwugbihlkplyccjaxefrtvdzns
qwugbihpkplomcjaxefotvdhns
qwggbphrkplymcjaxbfotvdzns
qwuipihrkplymcjaxefotvdznt
qwugbihrhplyccjaxeforvdzns
qwugbdhrkplymcjdxefotvdznv
qwugbihrkplymcjaxefotvbfos
qwugtihrkplymcocxefotvdzns
qwugbihrkpljmcjaxwfovvdzns
qwugbnhrkplymcjaxefotvdxnm
qwugbihrkpeymcjauefotvlzns
qwugbihjkplymcraxefftvdzns
qwugbghrkplymcjaxefotvizni
qwwgbihrkplymcjrxefotvrzns
qwugbihrkplymzjawexotvdzns
qwugnihrkplymcjpxnfotvdzns
qwugbihrkdlytcjaxecotvdzns
qwugbihrkacymdjaxefotvdzns
qlugbehrkplymcjaxzfotvdzns
fwugbihrkplymcjamefotldzns
qwugbihrkplymcjarefotlszns
qwsgbihrkpnymcjfxefotvdzns
awuubihrkplymcjaxefrtvdzns
qwngbihrkpjtmcjaxefotvdzns
qwugbihrkpltmkjaxefytvdzns
ewugbihrkplymcjvxefotvdzus
qwugbihrpplymcjaxsfmtvdzns
qwrgbihrmplymcjaxefutvdzns
qwugbihrknxymcwaxefotvdzns
qwugbnurkplymcjabefotvdzns
qwugbihrkphomfjaxefotvdzns
qwugbchrkplymcjaxefctvdens
qwugbidrkplymcjaxefotwwzns
qwggbohrkplgmcjaxefotvdzns
nwkgbihrkplymcjaxqfotvdzns
qwuibihrkpnymajaxefotvdzns
qwugsihrzplymujaxefotvdzns
qwugbihrkplumcgaxefodvdzns
qwugbqhrkplymcjaxefotvddts
qwugbiorkpvyacjaxefotvdzns
bjugbihukplymcjaxefotvdzns
qwugbyhrkplymxjaxexotvdzns
vwugbihrkplymcraxefotgdzns
qwugbihrkplymjwaxeaotvdzns
qwpsbihrkplykcjaxefotvdzns
qwugbqhrkplymcjaxefotgdzno
qwugbjhrkplymcjaxefatvczns
qwuglihrkclymcjvxefotvdzns
qjugbihrkpsymcjajefotvdzns
qwugbinrkptymcjaxedotvdzns
qwurbihrkglymcjaxefomvdzns
qfugbihrsxlymcjaxefotvdzns
lwuggihrkplymcjaxefotvdzds
qwugbihrkplymcjhxwfjtvdzns
qwugbhjrkplymcjaxefotvdyns
qwugbihrkplymcjoxefepvdzns
awwgbihryplymcjaxefotvdzns
qpugbihrkplymcjaxekorvdzns
qwulbihrkplymcuapefotvdzns
qwugbwhrkplymljaxefotvdrns
qwugxihrkplymjjalefotvdzns
qwugbmhrkplymcjyxefotvdnns
qwugbihrkplymcjnxgfotsdzns
qwygbihrkplsmczaxefotvdzns
qwugbihrkplymqjaxefovgdzns
qwuwbihrkplymcjaxefktvdznu
qwugbihrkplyfcjaxeoowvdzns
qwufbiyrkplymcjaxedotvdzns
qwusbirrkplymcjaxefotvdlns
qwurbihroplymtjaxefotvdzns
qiugbihrkplymcjaxefvtvmzns
qwugrihrkflymcjaxefotvdzls
qwugbimrzplymcoaxefotvdzns
qyugbiwrkplymcjasefotvdzns
qwubbihrkpiymcjaxefotvdzws
qwugbilrkplymjjgxefotvdzns
qwugbihykplympjaxefotgdzns
qwugmxhrkplymcjaxefotvdins
qwfjbahrkplymcjaxefotvdzns
owuzbihrkplymcbaxefotvdzns
qwugbihrkilymcjaxefotsdzvs
qwugbwhrkplymcpzxefotvdzns
qwugbihrkplymcjlcefotvdjns
kwugbihrkplymcjaxefotvhdns
qwulbihrkplymcfwxefotvdzns
qwxabihrkplyhcjaxefotvdzns
qwugbihrzpoymcjaxefotqdzns
qwugbihrknlymcjabefovvdzns
qyugbihrkplymclaxefotvgzns
qwugbxhrkpgymcjaxefotvdlns
qwuplihrkplymcjaxefhtvdzns
qwugbihruplymcjaxefotmdzps
qwugkihrkplymcqtxefotvdzns
qwugbihrkplymcjaxeyodvszns
qwukbihrkplymojaxefotvczns
nwugbihrkplymcjaxrfothdzns
qwugbihrkklymcjaxqfotvdzcs
qwugbihrkplemcjaxefotvufns
qwugbihrkplymcjaxbfitvdzne
qwugbizrkplymcjaxgfotvdhns
qwulbihrxplymcjaxefolvdzns
jwugbihckpoymcpaxefotvdzns
qwugeihrkplymbjcxefotvdzns
qwuxbihbkplymcjaxeuotvdzns
qwugbshrkplyvcjlxefotvdzns
qwugbimrjplymcjaxtfotvdzns
qwugzikrkplymcjaxefxtvdzns
qwugbihrkplymcjaxefftvdgnq
qwugbihnkilymcjaxemotvdzns
qfugbihrkplyfcjadefotvdzns
qwugbihrkplymrsaxefwtvdzns
qwugfihrkpsymckaxefotvdzns
qwulbihrkplymyjaxefotvdkns
quugbikrkpkymcjaxefotvdzns
qwugbihfgplymdjaxefotvdzns
qougbihrkplemcjaqefotvdzns
qwugbihrkplemcjjxefotvdyns
qfuhbikrkplymcjaxefotvdzns
qhugbihrcplymcjaxefrtvdzns
qwugbmhnkplymcjnxefotvdzns
qwugbihrkplymmjaaefofvdzns
qwugbihrtplykcjaxefoxvdzns
qwugbihrkmvymcjaxefetvdzns
qwugbfjrkplymcjaxefotadzns
qwuibihrrplymcjaxefotvdznv
qwcgbihrkjlymcjzxefotvdzns
qwugbihrkplymcjuxefytvzzns
qwkgwihrkllymcjaxefotvdzns
qwugbihrkplymcpaxgfogvdzns
qwuvbihrkplymcdaxefotvdmns
qwtgbihrkplqmcjgxefotvdzns
qwuglihrkplnmcjaxefptvdzns
qbugbihrkplymcjawefotidzns
qwegbihrvplymcjaxefqtvdzns
qwugbihrgqlyncjaxefotvdzns
qwugbihrpplymcjaxefotvdeqs
qwugbihrkplypzjaxefbtvdzns
qwugbihrkpkyncjanefotvdzns
qwugbshrkplymcjaxefotfdzys
qwugbihrkpymmcjaxefotzdzns
qwugbphrkplymcjaxefotvdzru
qyugbihrkplamcjjxefotvdzns
qwugbihrmphymcjaxefotedzns
qwuafihrkplymcjaxefozvdzns
qwugwihrkplymcjaxwfotvdzws
qwugbihrkzlymcjaxjfotvdznz
uwugsihrkplypcjaxefotvdzns
qwugbihrkplymcjaxefotudzur
qwugbihrkplymcjoxefotfdzng
qwugbihxkplymcjamebotvdzns
qpugvihrkplymcjaxefotvdzhs
qwugbihrkplyocgaxefotvdzss
qwugbihrkplymcpaqekotvdzns
qwunbihrkplymclaxefitvdzns
qzugbihrkplsmcjaxebotvdzns
qvugbihrkplymcjsxefotvmzns
qwugbihrkprymcyaxkfotvdzns
qwugbihukplymcjaxefotzlzns
qwusbihrkplymcjaxwfotxdzns
qwugbihrwplymcjaxefbtcdzns
qwugbihrkplymcjpxefotkdons
qwugbihrkhlymcjaxefohvwzns
qwukbihrkplymxjaxefotvdzms
qwugbiprkplsmcjaxefotvdznm
qwugbqhrkplymcjawwfotvdzns
qwugbihrkprymcjaxefotvdxnb
qwugbihrkplymcjaxefoivpzos
qwugbuhrkplymcjaxefotvdzsb
qwugblhrcplymcjaxefotvdyns
qtuabihrkplymejaxefotvdzns
qwucbihrkplyvcjaxefotvdznu
rwugbyhrkplymcjaxefotvdzrs
qruybihrkpsymcjaxefotvdzns
qwugbihrjpwymcjaxejotvdzns
qwugbihshplymcjaxefoavdzns
vwugbihrkplymwjaxefotvdznc
qwugbihrkpmymcjvxcfotvdzns
qkxgbihrkplymcjnxefotvdzns`;

    let splits = input.split("\n");
    let best_match: string[];
    let best_score = 0;
    splits.forEach((base) => {
        let base_split = base.split("");
        let sub_match = "";
        let sub_score = 0;
        splits.forEach((compare) => {
            let same = 0;
            for (let i = 0; i < base_split.length; i++) {
                if (base_split[i] === compare.split("")[i]) {
                    same++;
                }
            }
            if (same > sub_score && same !== base_split.length) {
                sub_score = same;
                sub_match = compare;
            }
        });
        if (sub_score > best_score) {
            best_score = sub_score;
            best_match = [base, sub_match];
        }
    });

    let common = best_match[0].split("").filter((letter, index) => {
        return letter === best_match[1].split("")[index];
    }).join("");

    self.postMessage([common]);
}


/**
 * postMessage dispatcher
 *
 * @param {MessageEvent} event Message received
 */
function commandDispatch(event: MessageEvent): void {
    aoc2b();
}

self.onmessage = commandDispatch;
